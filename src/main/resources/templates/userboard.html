<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"><head>
  <script src="/js/auth.js" defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prototype</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>

    body {font-family: 'Noto Sans KR', sans-serif;}

    .like-button {
      cursor: pointer;
      transition: color 0.3s;
    }
    .like-button.liked {
      color: red;
    }
    .slider {
      position: relative;
      width: 100%;
      overflow: hidden;
      border-radius: 0.5rem;
    }
    .slides {
      display: flex;
      transition: transform 0.3s ease-in-out;
    }
    .slide {
      min-width: 100%;
      box-sizing: border-box;
    }
    .slider-nav {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
    }
    .slider-nav button {
      background: rgba(0, 0, 0, 0.5);
      border: none;
      color: white;
      padding: 0.5rem;
      cursor: pointer;
    }
  </style>
  <link rel="icon" href="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FoXBYw%2FbtsIPXrDjTc%2FpLzzFxLchTAtiBSFLAfEX1%2Fimg.png" type="image/x-icon">
</head>
<body class="bg-gray-100">
<header class="flex justify-between items-center p-4 bg-white shadow">
  <div class="flex items-center">
    <a href="/public/main">
      <img src="https://github.com/user-attachments/assets/38c43d3b-dce7-422c-b89a-572308799e96" width="70" height="70" alt="Logo" class="mr-4">
    </a>
    <nav>
      <a th:href="@{/public/main}" class="mr-4">홈</a>
      <a href="/public/userboardCollection" class="mr-4">오늘의 동친</a>
      <a href="/public/meetsCollection" class="mr-4">내 주변 모임</a>
      <a href="/public/MyPage" class="mr-4">MyPage</a>
    </nav>
  </div>
  <div class="flex items-center">
    <button id="profileBtn" class="mr-4">내 프로필</button>
    <button id="logoutBtn" class="bg-black text-white px-4 py-2 rounded">로그아웃</button>
  </div>
</header>

<div class="max-w-4xl mx-auto p-4 bg-white shadow-md rounded-lg">
  <div class="flex justify-between items-center mb-4">
    <div class="text-gray-500 flex items-center space-x-2">
      <a href="profile.html" class="w-8 h-8 rounded-full overflow-hidden">
        <img src="https://source.unsplash.com/random/40x40" alt="Profile">
      </a>
      <span>username</span>
    </div>

  </div>
  <div class="flex">
    <div class="w-2/3 p-4">
      <div class="slider">
        <div class="slides">
          <div class="slide">
            <img src="./images/F1zfb1718452618.png" alt="Image 1" class="w-full h-96 object-cover">
          </div>
          <div class="slide">
            <img src="./images/1000008238.png" alt="Image 2" class="w-full h-96 object-cover">
          </div>
          <div class="slide">
            <img src="./images/1000010181.png" alt="Image 3" class="w-full h-96 object-cover">
          </div>
        </div>
        <div class="slider-nav">
          <button onclick="prevSlide()">&#10094;</button>
          <button onclick="nextSlide()">&#10095;</button>
        </div>
      </div>
      <div class="text-lg font-bold mb-2 mt-4">내용</div>
      <div class="p-4 bg-gray-100 rounded-lg mb-4">
        오늘도 나는 이쁘다
      </div>
      <div class="text-blue-500 text-sm">
        2024.08.21 작성됨
      </div>
    </div>
    <div class="w-1/3 p-4 bg-gray-200 rounded-lg relative">
      <div class="space-y-4" id="comments">
        <!-- Sample comment -->
        <div class="flex items-start p-4 bg-white rounded-lg shadow">
          <a href="profile.html" class="w-10 h-10 rounded-full overflow-hidden mr-4">
            <img src="https://source.unsplash.com/random/40x40" alt="Profile">
          </a>
          <div class="flex-grow">
            <div class="font-bold">사용자 이름</div>
            <div class="text-gray-600">댓글 내용</div>
          </div>
          <div class="flex items-center space-x-2">
            <button class="like-button" onclick="toggleLike(this)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15a7 7 0 0114 0c0 7-7 7-7 7s-7 0-7-7z"/>
              </svg>
            </button>
            <span class="like-count">0</span>
            <button class="delete-button text-red-500 hover:text-red-700">삭제</button>
          </div>
        </div>
        <!-- End of sample comment -->
      </div>
      <div class="mt-4">
        <textarea id="newComment" class="w-full p-2 border rounded-lg" rows="3" placeholder="댓글을 작성하세요"></textarea>
        <button onclick="addComment()" class="mt-2 w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-700">댓글 작성</button>
      </div>
    </div>
  </div>
</div>

<script>
  // 현재 사용자가 게시물 작성자인지 확인하는 변수
  const isAuthor = true; // 예시로 true 설정 (실제로는 서버에서 정보를 받아와 설정)

  document.addEventListener('DOMContentLoaded', function() {
    if (!isAuthor) {
      document.getElementById('post-actions').style.display = 'none';
      document.querySelectorAll('.delete-button').forEach(button => {
        button.style.display = 'none';
      });
    }
  });

  let currentSlide = 0;

  function showSlide(index) {
    const slides = document.querySelectorAll('.slide');
    if (index >= slides.length) {
      currentSlide = 0;
    } else if (index < 0) {
      currentSlide = slides.length - 1;
    } else {
      currentSlide = index;
    }
    const newTransformValue = `-${currentSlide * 100}%`;
    document.querySelector('.slides').style.transform = `translateX(${newTransformValue})`;
  }

  function nextSlide() {
    showSlide(currentSlide + 1);
  }

  function prevSlide() {
    showSlide(currentSlide - 1);
  }

  function toggleLike(button) {
    button.classList.toggle('liked');
    const likeCount = button.nextElementSibling;
    let count = parseInt(likeCount.textContent);
    if (button.classList.contains('liked')) {
      count++;
    } else {
      count--;
    }
    likeCount.textContent = count;
  }

  function addComment() {
    const newComment = document.getElementById('newComment').value;
    if (newComment.trim() === '') {
      alert('댓글 내용을 입력하세요.');
      return;
    }

    const commentsContainer = document.getElementById('comments');
    const commentElement = document.createElement('div');
    commentElement.classList.add('flex', 'items-start', 'p-4', 'bg-white', 'rounded-lg', 'shadow');

    commentElement.innerHTML = `
      <a href="profile.html" class="w-10 h-10 rounded-full overflow-hidden mr-4">
        <img src="https://source.unsplash.com/random/40x40" alt="Profile">
      </a>
      <div class="flex-grow">
        <div class="font-bold">사용자 이름</div>
        <div class="text-gray-600">${newComment}</div>
      </div>
      <div class="flex items-center space-x-2">
        <button class="like-button" onclick="toggleLike(this)">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15a7 7 0 0114 0c0 7-7 7-7 7s-7 0-7-7z"/>
          </svg>
        </button>
        <span class="like-count">0</span>
        <button class="delete-button text-red-500 hover:text-red-700">삭제</button>
      </div>
    `;

    commentsContainer.appendChild(commentElement);
    document.getElementById('newComment').value = '';

    // 댓글 작성 후 삭제 버튼 설정 (작성자가 본인으로 가정)
    if (!isAuthor) {
      commentElement.querySelector('.delete-button').style.display = 'none';
    }
  }
</script>
</body>
</html>
